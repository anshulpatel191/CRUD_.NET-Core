import React, {useState} from "react";
import { Container, Row, Col, Card, Form, Button} from 'react-bootstrap';
import CustomerTable from "../Components/CustomerTable";
import { useNavigate } from "react-router-dom";

const ViewCustomer = () => {
    

    return (
        <Container fluid>
        <h1>Admin Dashboard</h1>
      
        <Row style={{marginBottom: "20px"}}>
          <Col md={12}>
            <Card>
              <Card.Body >
                <h2 className="text-center">View Customer Details</h2>
                <Container>
      <CustomerTable/>
    </Container>
              </Card.Body>
            </Card>
          </Col>
        </Row>
       
      </Container>
    );
}


export default ViewCustomer;


import React, { useEffect, useState } from 'react';
import { useContext } from "react";
import axios from 'axios';
import { Table, Button } from 'react-bootstrap';
import { AppContext } from "../Context/App.context";
import { useNavigate } from 'react-router-dom';

const CustomerTable = () => {
  const [customers, setCustomers] = useState([]);
  const { user, handleUserInfo } = useContext(AppContext);
  const navigate = useNavigate();

  useEffect(() => {
    const headers= {"Authorization" : `Bearer ${user.token}`}
    axios.get('Customers',{headers})
      .then((response) => {
        setCustomers(response.data); 
      })
      .catch((error) => {
        console.error('Error fetching customer data:', error);
      });
  }, []);

  const handleViewClick = (customer) => {
        navigate(
          '/customer'
        )
  };
  
  return (
    <Table striped bordered hover>
      <thead>
        <tr>
          <th>Customer ID</th>
          <th>Customer Name</th>
          <th>View</th>
        </tr>
      </thead>
      <tbody>
        {customers.map((customer) => (
          <tr key={customer.id}>
            <td>{customer.customerId}</td>
            <td>{customer.customerName}</td>
            <td>
              <Button variant="primary" onClick={() => handleViewClick(customer)}>View</Button>
            </td>
          </tr>
        ))}
      </tbody>
    </Table>
  );

};

export default CustomerTable;
